<script type="text/javascript">
  $(function (){
      $('a.ajax').click(function() {
	  var url = this.href;
	  var dialog = $('<div style="display:hidden"></div>').appendTo('body');
	  var title = this.title;
	  // load remote content
	  dialog.load(
	      url, 
	      "",
	      function (responseText, textStatus, XMLHttpRequest) {
		  dialog.dialog({ height: "auto", width: "600", title: title, resizable: false });
	      }
	  );
	  //prevent the browser to follow the link
	  return false;
      });
  });
</script>

<div id="menu">
  <ul id="nav">
    <li><a href="/home/1">GeekStories</a>
    </li>
    <li><a href="/new_post/" title="New Post" class="ajax">Submit</a></li>
    <li><a href="/best/">Best</a>
    </li>
    <li><a href="/worst/">Worst</a>
    </li>
    <li><a href="/about">What The Hell..</a>
    </li>
    {% ifequal request.user.username '' %}
      <li><a href="/accounts/login" title="Login" class="ajax">Login/Register! </a>
	<ul>
	  <li><a href="/accounts/login" title="Login" class="ajax"><span class="black no_shadow">Don't be a nameless geek!</span></a></li>
	  <li><a href="/accounts/login" title="Login" class="ajax">Login</a></li>
	  <li><a href="/accounts/register" title="New Post" class="ajax">Register</a></li>
	</ul>
      </li>
    {% else %}
      <li><a href="/accounts/logout/">Logout: {{ request.user.username }}</a></li>
    {% endifequal %}
</div>